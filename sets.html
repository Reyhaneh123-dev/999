<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§</title>
<style>
body{font-family:'Tahoma',sans-serif; background:#e3f2fd; color:#222; padding:20px; direction:rtl;}
h2{color:#0d47a1;}
select,input,button{margin:10px 0;padding:8px 12px;font-size:16px;}
button{border:none;border-radius:8px;cursor:pointer;background:#1976d2;color:white;transition:0.3s;}
button:hover{background:#0d47a1;}
.big-btn{display:block;width:90%;margin-top:20px;padding:12px;font-size:18px;background:#1565c0;}
.result-box{background:white;border-radius:10px;padding:15px;margin-top:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
#vennCanvas,#axisCanvas{width:100%; height:200px; background:#e3f2fd; margin-top:10px;}
</style>
</head>
<body>

<h2>ğŸ”¹ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ <span id="userNameDisplay"></span></h2>

<h2>ØªØ¹Ø±ÛŒÙ Ù…Ø¬Ù…ÙˆØ¹Ù‡ A:</h2>
<label>Ø¹Ø¶Ùˆ Ú©Ø¯Ø§Ù… Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¬Ù‡Ø§Ù†ÛŒ Ø§Ø³ØªØŸ</label>
<select id="knownSet">
  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
  <option value="N">N (Ø§Ø¹Ø¯Ø§Ø¯ Ø·Ø¨ÛŒØ¹ÛŒ)</option>
  <option value="W">W (Ø§Ø¹Ø¯Ø§Ø¯ Ø´Ù…Ø§Ø±Ø´ÛŒ)</option>
  <option value="Z">Z (Ø§Ø¹Ø¯Ø§Ø¯ ØµØ­ÛŒØ­)</option>
  <option value="Q">Q (Ø§Ø¹Ø¯Ø§Ø¯ Ú¯ÙˆÛŒØ§)</option>
  <option value="I">I (Ø§Ø¹Ø¯Ø§Ø¯ Ú¯Ù†Ú¯)</option>
  <option value="R">R (Ø§Ø¹Ø¯Ø§Ø¯ Ø­Ù‚ÛŒÙ‚ÛŒ)</option>
</select>

<label>Ø´Ø±Ø· Ø±Ø§ Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ø³Ø§Ø¯Ù‡ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯:</label><br>
<input id="textCondition" type="text" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø¨Ø²Ø±Ú¯ØªØ± Ù…Ø³Ø§ÙˆÛŒ 3">

<button onclick="makeExpression()">Ù†Ù…Ø§ÛŒØ´ Ù†Ù…Ø§Ø¯ Ø±ÛŒØ§Ø¶ÛŒ</button>
<div id="mathResult" class="result-box"></div>

<button onclick="showMembers()">Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ø¶Ø§</button>
<div id="membersBox" class="result-box"></div>

<button onclick="showVenn()">Ù†Ù…Ø§ÛŒØ´ Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ†</button>
<canvas id="vennCanvas"></canvas>

<button onclick="showAxis()">Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ÙˆØ±</button>
<canvas id="axisCanvas"></canvas>

<button class="big-btn" onclick="window.location.href='operations.html'">Ø§Ù†Ø¬Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª Ø±ÛŒØ§Ø¶ÛŒ</button>

<script>
// Ù†Ù…Ø§ÛŒØ´ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±
document.getElementById("userNameDisplay").innerText = localStorage.getItem("userName") || "";

// ØªØ¨Ø¯ÛŒÙ„ Ø´Ø±Ø· ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø±ÛŒØ§Ø¶ÛŒ
function convertCondition(cond){
  let c = cond.replace(/Ø¨Ø²Ø±Ú¯ØªØ± Ù…Ø³Ø§ÙˆÛŒ/gi, "â‰¥")
              .replace(/Ú©ÙˆÚ†Ú©ØªØ± Ù…Ø³Ø§ÙˆÛŒ/gi, "â‰¤")
              .replace(/Ø¨Ø²Ø±Ú¯ØªØ±/gi, ">")
              .replace(/Ú©ÙˆÚ†Ú©ØªØ±/gi, "<")
              .replace(/Ù…Ø³Ø§ÙˆÛŒ/gi, "=");
  return c;
}

// Ù†Ù…Ø§ÛŒØ´ Ù†Ù…Ø§Ø¯ Ø±ÛŒØ§Ø¶ÛŒ
function makeExpression(){
  let set = document.getElementById("knownSet").value;
  let cond = document.getElementById("textCondition").value.trim();
  if(!set){alert("Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"); return;}
  if(!cond){alert("Ù„Ø·ÙØ§Ù‹ Ø´Ø±Ø· Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"); return;}
  let expression = `{ x âˆˆ ${set} | ${convertCondition(cond)} }`;
  document.getElementById("mathResult").innerText = expression;
}

// Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ø¶Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù…Ø­Ø¯ÙˆØ¯
function showMembers(){
  let set = document.getElementById("knownSet").value;
  let box = document.getElementById("membersBox");
  if(set==="N"){box.innerText="{1,2,3,...}";}
  else if(set==="W"){box.innerText="{0,1,2,...}";}
  else if(set==="Z"){box.innerText="{..., -2,-1,0,1,2,...}";}
  else{box.innerText="Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ø¶Ø§ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø§Ù…Ú©Ø§Ù†â€ŒÙ¾Ø°ÛŒØ± Ù†ÛŒØ³Øª.";}
}

// Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ø§Ù†ÛŒÙ…ÛŒØ´Ù†ÛŒ (Ø³Ø§Ø¯Ù‡)
function showVenn(){
  const canvas = document.getElementById("vennCanvas");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);
  let cx=canvas.width/2, cy=canvas.height/2, r=50;
  let angle=0;
  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.beginPath();
    ctx.arc(cx,cy,r*angle/100,0,2*Math.PI*angle/100);
    ctx.strokeStyle="blue";
    ctx.lineWidth=3;
    ctx.stroke();
    angle++;
    if(angle<=100) requestAnimationFrame(animate);
  }
  animate();
}

// Ù…Ø­ÙˆØ± Ø¹Ø¯Ø¯ÛŒ (Ù†Ù…ÙˆÙ†Ù‡ Ø³Ø§Ø¯Ù‡)
function showAxis(){
  const canvas=document.getElementById("axisCanvas");
  const ctx=canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);
  let startX=50,endX=canvas.width-50,y=100;
  ctx.beginPath();
  ctx.moveTo(startX,y);
  ctx.lineTo(endX,y);
  ctx.strokeStyle="black";
  ctx.lineWidth=2;
  ctx.stroke();
  // Ø¯Ø§ÛŒØ±Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Ø±ÙˆÛŒ 3ØŒ4ØŒ5
  [3,4,5].forEach((num,i)=>{
    ctx.beginPath();
    ctx.arc(startX+i*50,y,8,0,2*Math.PI);
    ctx.fillStyle="black";
    ctx.fill();
  });
}
</script>
</body>
</html>
